<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Dispatchapy Access</title>
        <script src="/static/tailwindcss.js"></script>
        <link rel="icon" href="/static/favicon.png" type="image/svg+xml">
        <link rel="apple-touch-icon" href="/static/favicon.png">
        <style>
            body {
                background-color: #f3f4f6;
                background-image: radial-gradient(#d1d5db 1px, transparent 1px);
                background-size: 16px 16px;
            }
        </style>
    </head>
    <body class="flex items-center justify-center h-screen">
        <!-- The main card that looks like a document -->
        <div class="w-full max-w-sm bg-white rounded-xl shadow-2xl overflow-hidden">
            
            <!-- Header Section with the Final Logo -->
            <div class="bg-gray-800 p-6">
                <div class="flex items-center justify-center space-x-3">
                    <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center flex-shrink-0">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="fill-current text-gray-800 transform -rotate-45 translate-x-1 -translate-y-1">
                            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-white tracking-wider">Dispatchapy</h1>
                        <p class="text-xs text-gray-400 uppercase tracking-widest">API Dispatch Gateway</p>
                    </div>
                </div>
            </div>
            
            <!-- Form Section -->
            <div class="p-6">
                <div class="mb-4 flex space-x-2">
                    <button id="tab-admin" class="flex-1 px-3 py-2 bg-blue-600 text-white rounded-md focus:outline-none">Administrator</button>
                    <button id="tab-client" class="flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-md focus:outline-none">Client</button>
                </div>

                <div id="panel-admin">
                    <form method="post" action="/login">
                        <div class="space-y-4">
                            <div>
                                <label for="password" class="text-xs font-semibold text-gray-500 uppercase">Administrator Password</label>
                                <input type="password" name="password" id="password" required autofocus
                                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                        </div>

                        {% if error %}
                            <p class="text-red-500 text-sm mt-4 text-center">{{ error }}</p>
                        {% endif %}

                        <div class="mt-6">
                            <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors">
                                Sign in
                            </button>
                        </div>
                    </form>
                </div>

                <div id="panel-client" class="hidden">
                    <form method="post" action="/client/login">
                        <div class="space-y-4">
                            <div>
                                <label for="token" class="text-xs font-semibold text-gray-500 uppercase">Client Token</label>
                                <input type="text" name="token" id="token" required
                                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                        </div>

                        {% if client_error %}
                            <p class="text-red-500 text-sm mt-4 text-center">{{ client_error }}</p>
                        {% endif %}

                        <div class="mt-6">
                            <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors">
                                Sign in
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <script>
                const tabAdmin = document.getElementById('tab-admin');
                const tabClient = document.getElementById('tab-client');
                const panelAdmin = document.getElementById('panel-admin');
                const panelClient = document.getElementById('panel-client');

                function activateAdmin(){
                    tabAdmin.classList.remove('bg-gray-100','text-gray-700');
                    tabAdmin.classList.add('bg-blue-600','text-white');
                    tabClient.classList.remove('bg-blue-600','text-white');
                    tabClient.classList.add('bg-gray-100','text-gray-700');
                    panelAdmin.classList.remove('hidden');
                    panelClient.classList.add('hidden');
                }
                function activateClient(){
                    tabClient.classList.remove('bg-gray-100','text-gray-700');
                    tabClient.classList.add('bg-blue-600','text-white');
                    tabAdmin.classList.remove('bg-blue-600','text-white');
                    tabAdmin.classList.add('bg-gray-100','text-gray-700');
                    panelClient.classList.remove('hidden');
                    panelAdmin.classList.add('hidden');
                }

                tabAdmin.addEventListener('click', activateAdmin);
                tabClient.addEventListener('click', activateClient);

                // Auto-select tab if server indicated a client error
                {% if client_error %}
                    activateClient();
                {% endif %}
            </script>
        </div>
    </body>
    </html>